"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3705],{42298:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>_,frontMatter:()=>l,metadata:()=>R,toc:()=>A});var r=a(87462),n=(a(67294),a(3905)),o=a(26389),i=a(94891),s=a(75190),d=a(47507),c=a(24310),p=a(63303),m=(a(75035),a(85162));const l={id:"add-transaction",title:"Create transaction for one player ",description:"Create a transaction for player with `playerId`",sidebar_label:"Create transaction for one player ",hide_title:!0,hide_table_of_contents:!0,api:{operationId:"addTransaction",description:"Create a transaction for player with `playerId`  \nBehavior for transaction types:  \n  All addTransactions calls are expected to be idempotent, i.e. if a transaction already exists then balance should be returned together with status OK.  \n  - WITHDRAW, PROMOWITHDRAW  \n    A withdraw transaction starts the chain of events for a game round.  \n  - DEPOSIT  \n    If there is no corresponding game round, return error `PAM_ERR_TRANS_NOT_FOUND` and balance.  \n    If there is a transaction with the same id but different user, game or round return error `PAM_ERR_DUPLICATE_TRANS`  \n    If there is in fact a corresponding game round, but it's closed, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n  - PROMODEPOSIT  \n    A corresponding WITHDRAW does not need to exist for a PROMODEPOSIT to be accepted.  \n  - CANCEL, PROMOCANCEL  \n    If the corresponding WITHDRAW does not exist, return error `PAM_ERR_CANCEL_NOT_FOUND` and balance.  \n    If trying to cancel an already cancelled transaction, i.e. with a second unique cancellation request, return `PAM_ERR_TRANS_ALREADY_CANCELLED` and balance.  \n    If trying to cancel an already settled transaction, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n    If trying to cancel something else, return error `PAM_ERR_CANCEL_NON_WITHDRAW` and balance.\n",tags:["transactions"],parameters:[{in:"path",required:!0,name:"playerId",description:"id of player",example:"73619e57b3bc4b4e9014132be3bd12a9",schema:{type:"string"}},{in:"query",name:"provider",required:!0,description:"Name of the game provider associated with the session",example:"Evolution",schema:{type:"string"}},{name:"X-Player-Token",description:"Player game session identifier",in:"header",required:!0,schema:{name:"sessionToken",description:"Player game session identifier",type:"string",example:"7ca10daf12f2cac9fecf559b11f0f0c8bd21ae43",minLength:32,maxLength:40}},{name:"X-Correlation-ID",description:"Header for correlating requests between the services for debugging purposes and request tracing. The value will originate from the game providers that support request identification. Otherwise Valkyrie will generate a value.\n",in:"header",required:!0,schema:{type:"string"}}],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}},provider:{type:"string",description:"Game provider identity known by the PAM and Valkyrie",example:"Evolution"},transactionType:{type:"string",enum:["DEPOSIT","WITHDRAW","CANCEL","PROMODEPOSIT","PROMOWITHDRAW","PROMOCANCEL"],description:"Transaction types according to:\n* `DEPOSIT` - for adding funds\n* `WITHDRAW` - subtract funds from an account balance. Generally for placing bets\n* `CANCEL` - reverting a previous transaction\n* `PROMODEPOSIT` - payout from promo and similar offerings programs\n* `PROMOWITHDRAW` - buyin to promo and similar offerings programs\n* `PROMOCANCEL` - reverting a previous promo transaction\n"},cashAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},bonusAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},transactionDateTime:{description:"A date and time in IS0 8601 format",example:"1994-11-05T13:15:30Z",format:"date-time",type:"string"},providerTransactionId:{description:"The RGS transaction identifier. Unique for each provider. Either this or `providerBetRef` is required. `providerBetRef` will be prioritized if both are present.",type:"string",example:"42a9e3d4eddade52363a5c4fac852e80681c2fe5",minLength:1,maxLength:40},providerBetRef:{description:"Provider bet reference for grouping or matching transactions. Either this or `providerTransactionId` is required. This one is prioritized if both are present. It is used for RGS:s that encapsulate many transactions in a wrapper transaction.",type:"string",example:"f1adc846131b33be72df6a0c87e5e5da59dde0ff",minLength:1,maxLength:40},providerGameId:{description:"The game identifier unique for the RGS(provider)",type:"string",example:"ecf559b11f0",minLength:1,maxLength:40},providerRoundId:{description:"The unique game round identifier for the provider",type:"string",example:"47d4f7c212464aacf10",minLength:1,maxLength:40},isGameOver:{type:"boolean"},promos:{type:"array",items:{type:"object",properties:{promoType:{type:"string",enum:["PROMOBONUS","PROMOTOURNAMENT","PROMOFROMGAME","PROMOCAP","PROMOLIMIT","PROMOMONEYREWARD","FREEROUNDS","FREESPINS"],description:"Promo types according to:\n* `PROMOBONUS` - bonus promotion\n* `PROMOTOURNAMENT` - tournament related promotion\n* `PROMOFROMGAME` - promotion awarded from a game\n* `PROMOCAP` - capped promotion\n* `PROMOLIMIT` - limited promotion\n* `PROMOMONEYREWARD` - real money promotion award\n* `FREEROUNDS` - extra game rounds for free\n* `FREESPINS` - extra spins for free\n"},promoName:{description:"Name of offering, if any",type:"string",example:"Try this other game for free",minLength:1,maxLength:40},promoStatus:{description:"Offering status, if any",type:"string",example:"Active",minLength:1,maxLength:40},promoReference:{description:"Reference to the offering, if any",type:"string",example:"C3",minLength:1,maxLength:40},promoCode:{description:"Offering code, if any",type:"string",example:"A1",minLength:1,maxLength:40},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmountTotal:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoConfigRef:{description:"Offering configuration reference, if any",type:"string",example:"B2",minLength:1,maxLength:40},promoAwardRef:{description:"Offering award reference, if any",type:"string",example:"C3",minLength:1,maxLength:40},currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}}}}},jackpots:{type:"array",items:{type:"object",properties:{jackpotId:{description:"Jackpot identifier",type:"string",example:"Jackpot1",minLength:1,maxLength:40},jackpotReference:{description:"Jackpot reference, arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},jackpotAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},jackpotBuckets:{type:"array",items:{type:"object",properties:{bucketType:{description:"Type of jackpot bucket, if any. Arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},bucketReference:{description:"Jackpot bucket reference, arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},bucketAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}}}}}}}},tip:{type:"object",properties:{tipAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"}}}},required:["currency","provider","transactionType","cashAmount","bonusAmount","promoAmount","transactionDateTime","providerTransactionId"]}}}},responses:{200:{description:"The transaction response.",content:{"application/json":{schema:{allOf:[{type:"object",properties:{status:{type:"string",enum:["OK","ERROR"]},error:{description:"Error details describing why PAM rejected the request",type:"object",required:["code","message"],properties:{code:{type:"string",description:"- `PAM_ERR_UNDEFINED` - When you need a generic error.\n- `PAM_ERR_ACC_NOT_FOUND` - When account of `playerId` is not found.\n- `PAM_ERR_GAME_NOT_FOUND` - When specified `providerGameId` is not found.\n- `PAM_ERR_ROUND_NOT_FOUND` - In getGameRound, when there is no game round with id `providerGameRoundId`.\n- `PAM_ERR_TRANS_NOT_FOUND` - In DEPOSIT transaction if the game round with id `providerRoundId` is not found.\n- `PAM_ERR_CASH_OVERDRAFT` - When user does not have enough funds on their account for a withdraw transactions.\n- `PAM_ERR_BONUS_OVERDRAFT` - When user does not have enough funds on their bonus account for a withdraw transaction.\n- `PAM_ERR_SESSION_NOT_FOUND` - When no session is found for provided `X-Player-Token`.\n- `PAM_ERR_SESSION_EXPIRED` - When session related to `X-Player-Token` has expired.\n- `PAM_ERR_MISSING_PROVIDER` - When specified query parameter `provider` is not found.\n- `PAM_ERR_TRANS_CURRENCY` - When specified `Currency` does not match that of the session.\n- `PAM_ERR_NEGATIVE_STAKE` - When transaction amount is negative.\n- `PAM_ERR_CANCEL_NOT_FOUND` - When the transaction trying to cancel doesn't exist.\n- `PAM_ERR_TRANS_ALREADY_CANCELLED` - When trying to cancel an already cancelled transaction, or when a Deposit is made toward a cancelled withdraw.\n- `PAM_ERR_CANCEL_NON_WITHDRAW` - When trying to cancel a transaction that is not a Withdraw transaction.\n- `PAM_ERR_BET_NOT_ALLOWED` - When a bet cannot be done, eg when the user is blocked.\n- `PAM_ERR_PLAYER_NOT_FOUND` - When `playerId` is not found.\n- `PAM_ERR_API_TOKEN` - When `Authorization` header api token does not match the PAM api token.\n- `PAM_ERR_TRANS_ALREADY_SETTLED` - When trying to cancel an already Deposited bet or when trying to Deposit on an already finished gameRound, finished bet.\n- `PAM_ERR_DUPLICATE_TRANS` - When a Deposit is made with an already existing `providerTransactionId` but with different `playerId`/`providerGameId`/`providerRoundId`.\n- `PAM_ERR_PROMO_OVERDRAFT` - When user does not have enough funds on their promo account for a withdraw transaction.\n- `PAM_ERR_TIMEOUT` - A timeout occurred\n",enum:["PAM_ERR_UNDEFINED","PAM_ERR_ACC_NOT_FOUND","PAM_ERR_GAME_NOT_FOUND","PAM_ERR_ROUND_NOT_FOUND","PAM_ERR_TRANS_NOT_FOUND","PAM_ERR_CASH_OVERDRAFT","PAM_ERR_BONUS_OVERDRAFT","PAM_ERR_SESSION_NOT_FOUND","PAM_ERR_SESSION_EXPIRED","PAM_ERR_MISSING_PROVIDER","PAM_ERR_TRANS_CURRENCY","PAM_ERR_NEGATIVE_STAKE","PAM_ERR_CANCEL_NOT_FOUND","PAM_ERR_TRANS_ALREADY_CANCELLED","PAM_ERR_CANCEL_NON_WITHDRAW","PAM_ERR_BET_NOT_ALLOWED","PAM_ERR_PLAYER_NOT_FOUND","PAM_ERR_API_TOKEN","PAM_ERR_TRANS_ALREADY_SETTLED","PAM_ERR_DUPLICATE_TRANS","PAM_ERR_PROMO_OVERDRAFT","PAM_ERR_TIMEOUT"]},message:{type:"string"}}}},required:["status"]},{type:"object",properties:{transactionResult:{type:"object",properties:{transactionId:{type:"string",description:"Unique transaction identifier from the PAM system",minLength:1,maxLength:40,example:"05a9edc0f73c297b"},balance:{description:"player account balance",type:"object",properties:{cashAmount:{description:"Funds on the account.",type:"number",format:"double",example:1236.123456,"x-go-type":"Amt"},bonusAmount:{description:"Funds on the bonus account.",type:"number",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"}},required:["cashAmount","bonusAmount","promoAmount"]}}}}}]}}}},400:{description:"Invalid request body"},401:{description:"Invalid session or api key",content:{"application/json":{schema:{type:"object",required:["status","error"],properties:{status:{description:"Status is Error",type:"string",example:"Error"},error:{description:"Error details describing why PAM rejected the request",type:"object",required:["code","message"],properties:{message:{type:"string"},code:{description:'Pam Error code "PAM_ERR_SESSION_NOT_FOUND" or "PAM_ERR_UNDEFINED"',type:"string",example:"PAM_ERR_SESSION_NOT_FOUND"}}}}}}}}},method:"post",path:"/players/{playerId}/transactions",servers:[{url:"http://pam-url",description:"operator pam server"}],security:[{bearerAuth:[]}],securitySchemes:{bearerAuth:{type:"http",description:"PAM API token, if any is required",scheme:"bearer"}},jsonRequestBodyExample:{currency:"USD",provider:"Evolution",transactionType:"DEPOSIT",cashAmount:1236.123456,bonusAmount:1236.123456,promoAmount:1236.123456,transactionDateTime:"1994-11-05T13:15:30Z",providerTransactionId:"42a9e3d4eddade52363a5c4fac852e80681c2fe5",providerBetRef:"f1adc846131b33be72df6a0c87e5e5da59dde0ff",providerGameId:"ecf559b11f0",providerRoundId:"47d4f7c212464aacf10",isGameOver:!0,promos:[{promoType:"PROMOBONUS",promoName:"Try this other game for free",promoStatus:"Active",promoReference:"C3",promoCode:"A1",promoAmount:1236.123456,promoAmountTotal:1236.123456,promoConfigRef:"B2",promoAwardRef:"C3",currency:"USD"}],jackpots:[{jackpotId:"Jackpot1",jackpotReference:"Jackpot1",jackpotAmount:1236.123456,jackpotBuckets:[{bucketType:"Jackpot1",bucketReference:"Jackpot1",bucketAmount:1236.123456,currency:"USD"}]}],tip:{tipAmount:1236.123456}},info:{title:"Valkyrie PAM API",description:'Specification describing required endpoints implemented in an operator\nPlayer Account Management(PAM) system, in order to integrate with\nthe Valkyrie aggregator.\n\nResponse format will consist of a common wrapper containing status\ncode and either requested data or error details according to specs\nbelow. In general HTTP error codes will only describe hard errors\nnot business logic.\n```json\n{\n  "status": "OK",\n  "entity": {...}\n}\n```\nor in case of error:\n```json\n{\n  "status": "ERROR",\n  "error": {\n    "code": 1\n    "msg": "provider not recognized"\n  }\n}\n```\n',version:"0.5.0"},postman:{name:"Create transaction for one player\n",description:{content:"Create a transaction for player with `playerId`  \nBehavior for transaction types:  \n  All addTransactions calls are expected to be idempotent, i.e. if a transaction already exists then balance should be returned together with status OK.  \n  - WITHDRAW, PROMOWITHDRAW  \n    A withdraw transaction starts the chain of events for a game round.  \n  - DEPOSIT  \n    If there is no corresponding game round, return error `PAM_ERR_TRANS_NOT_FOUND` and balance.  \n    If there is a transaction with the same id but different user, game or round return error `PAM_ERR_DUPLICATE_TRANS`  \n    If there is in fact a corresponding game round, but it's closed, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n  - PROMODEPOSIT  \n    A corresponding WITHDRAW does not need to exist for a PROMODEPOSIT to be accepted.  \n  - CANCEL, PROMOCANCEL  \n    If the corresponding WITHDRAW does not exist, return error `PAM_ERR_CANCEL_NOT_FOUND` and balance.  \n    If trying to cancel an already cancelled transaction, i.e. with a second unique cancellation request, return `PAM_ERR_TRANS_ALREADY_CANCELLED` and balance.  \n    If trying to cancel an already settled transaction, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n    If trying to cancel something else, return error `PAM_ERR_CANCEL_NON_WITHDRAW` and balance.\n",type:"text/plain"},url:{path:["players",":playerId","transactions"],host:["{{baseUrl}}"],query:[{disabled:!1,description:{content:"(Required) Name of the game provider associated with the session",type:"text/plain"},key:"provider",value:""}],variable:[{disabled:!1,description:{content:"(Required) id of player",type:"text/plain"},type:"any",value:"",key:"playerId"}]},header:[{disabled:!1,description:{content:"(Required) Player game session identifier",type:"text/plain"},key:"X-Player-Token",value:""},{disabled:!1,description:{content:"(Required) Header for correlating requests between the services for debugging purposes and request tracing. The value will originate from the game providers that support request identification. Otherwise Valkyrie will generate a value.\n",type:"text/plain"},key:"X-Correlation-ID",value:""},{key:"Content-Type",value:"application/json"},{key:"Accept",value:"application/json"}],method:"POST",body:{mode:"raw",raw:'""',options:{raw:{language:"json"}}}}},sidebar_class_name:"post api-method",info_path:"docs/wallet/valkyrie-pam-api",custom_edit_url:null},u=void 0,R={unversionedId:"wallet/add-transaction",id:"wallet/add-transaction",title:"Create transaction for one player ",description:"Create a transaction for player with `playerId`",source:"@site/docs/wallet/add-transaction.api.mdx",sourceDirName:"wallet",slug:"/wallet/add-transaction",permalink:"/docs/wallet/add-transaction",draft:!1,editUrl:null,tags:[],version:"current",lastUpdatedBy:"Tommy",lastUpdatedAt:1671693633,formattedLastUpdatedAt:"Dec 22, 2022",frontMatter:{id:"add-transaction",title:"Create transaction for one player ",description:"Create a transaction for player with `playerId`",sidebar_label:"Create transaction for one player ",hide_title:!0,hide_table_of_contents:!0,api:{operationId:"addTransaction",description:"Create a transaction for player with `playerId`  \nBehavior for transaction types:  \n  All addTransactions calls are expected to be idempotent, i.e. if a transaction already exists then balance should be returned together with status OK.  \n  - WITHDRAW, PROMOWITHDRAW  \n    A withdraw transaction starts the chain of events for a game round.  \n  - DEPOSIT  \n    If there is no corresponding game round, return error `PAM_ERR_TRANS_NOT_FOUND` and balance.  \n    If there is a transaction with the same id but different user, game or round return error `PAM_ERR_DUPLICATE_TRANS`  \n    If there is in fact a corresponding game round, but it's closed, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n  - PROMODEPOSIT  \n    A corresponding WITHDRAW does not need to exist for a PROMODEPOSIT to be accepted.  \n  - CANCEL, PROMOCANCEL  \n    If the corresponding WITHDRAW does not exist, return error `PAM_ERR_CANCEL_NOT_FOUND` and balance.  \n    If trying to cancel an already cancelled transaction, i.e. with a second unique cancellation request, return `PAM_ERR_TRANS_ALREADY_CANCELLED` and balance.  \n    If trying to cancel an already settled transaction, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n    If trying to cancel something else, return error `PAM_ERR_CANCEL_NON_WITHDRAW` and balance.\n",tags:["transactions"],parameters:[{in:"path",required:!0,name:"playerId",description:"id of player",example:"73619e57b3bc4b4e9014132be3bd12a9",schema:{type:"string"}},{in:"query",name:"provider",required:!0,description:"Name of the game provider associated with the session",example:"Evolution",schema:{type:"string"}},{name:"X-Player-Token",description:"Player game session identifier",in:"header",required:!0,schema:{name:"sessionToken",description:"Player game session identifier",type:"string",example:"7ca10daf12f2cac9fecf559b11f0f0c8bd21ae43",minLength:32,maxLength:40}},{name:"X-Correlation-ID",description:"Header for correlating requests between the services for debugging purposes and request tracing. The value will originate from the game providers that support request identification. Otherwise Valkyrie will generate a value.\n",in:"header",required:!0,schema:{type:"string"}}],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}},provider:{type:"string",description:"Game provider identity known by the PAM and Valkyrie",example:"Evolution"},transactionType:{type:"string",enum:["DEPOSIT","WITHDRAW","CANCEL","PROMODEPOSIT","PROMOWITHDRAW","PROMOCANCEL"],description:"Transaction types according to:\n* `DEPOSIT` - for adding funds\n* `WITHDRAW` - subtract funds from an account balance. Generally for placing bets\n* `CANCEL` - reverting a previous transaction\n* `PROMODEPOSIT` - payout from promo and similar offerings programs\n* `PROMOWITHDRAW` - buyin to promo and similar offerings programs\n* `PROMOCANCEL` - reverting a previous promo transaction\n"},cashAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},bonusAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},transactionDateTime:{description:"A date and time in IS0 8601 format",example:"1994-11-05T13:15:30Z",format:"date-time",type:"string"},providerTransactionId:{description:"The RGS transaction identifier. Unique for each provider. Either this or `providerBetRef` is required. `providerBetRef` will be prioritized if both are present.",type:"string",example:"42a9e3d4eddade52363a5c4fac852e80681c2fe5",minLength:1,maxLength:40},providerBetRef:{description:"Provider bet reference for grouping or matching transactions. Either this or `providerTransactionId` is required. This one is prioritized if both are present. It is used for RGS:s that encapsulate many transactions in a wrapper transaction.",type:"string",example:"f1adc846131b33be72df6a0c87e5e5da59dde0ff",minLength:1,maxLength:40},providerGameId:{description:"The game identifier unique for the RGS(provider)",type:"string",example:"ecf559b11f0",minLength:1,maxLength:40},providerRoundId:{description:"The unique game round identifier for the provider",type:"string",example:"47d4f7c212464aacf10",minLength:1,maxLength:40},isGameOver:{type:"boolean"},promos:{type:"array",items:{type:"object",properties:{promoType:{type:"string",enum:["PROMOBONUS","PROMOTOURNAMENT","PROMOFROMGAME","PROMOCAP","PROMOLIMIT","PROMOMONEYREWARD","FREEROUNDS","FREESPINS"],description:"Promo types according to:\n* `PROMOBONUS` - bonus promotion\n* `PROMOTOURNAMENT` - tournament related promotion\n* `PROMOFROMGAME` - promotion awarded from a game\n* `PROMOCAP` - capped promotion\n* `PROMOLIMIT` - limited promotion\n* `PROMOMONEYREWARD` - real money promotion award\n* `FREEROUNDS` - extra game rounds for free\n* `FREESPINS` - extra spins for free\n"},promoName:{description:"Name of offering, if any",type:"string",example:"Try this other game for free",minLength:1,maxLength:40},promoStatus:{description:"Offering status, if any",type:"string",example:"Active",minLength:1,maxLength:40},promoReference:{description:"Reference to the offering, if any",type:"string",example:"C3",minLength:1,maxLength:40},promoCode:{description:"Offering code, if any",type:"string",example:"A1",minLength:1,maxLength:40},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmountTotal:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},promoConfigRef:{description:"Offering configuration reference, if any",type:"string",example:"B2",minLength:1,maxLength:40},promoAwardRef:{description:"Offering award reference, if any",type:"string",example:"C3",minLength:1,maxLength:40},currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}}}}},jackpots:{type:"array",items:{type:"object",properties:{jackpotId:{description:"Jackpot identifier",type:"string",example:"Jackpot1",minLength:1,maxLength:40},jackpotReference:{description:"Jackpot reference, arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},jackpotAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},jackpotBuckets:{type:"array",items:{type:"object",properties:{bucketType:{description:"Type of jackpot bucket, if any. Arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},bucketReference:{description:"Jackpot bucket reference, arbitrary use",type:"string",example:"Jackpot1",minLength:1,maxLength:40},bucketAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"},currency:{type:"string",description:"ISO 4217 three letter currency code",pattern:"^[A-Z]{3}$",example:"USD",externalDocs:{url:"https://en.wikipedia.org/wiki/ISO_4217"}}}}}}}},tip:{type:"object",properties:{tipAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"}}}},required:["currency","provider","transactionType","cashAmount","bonusAmount","promoAmount","transactionDateTime","providerTransactionId"]}}}},responses:{200:{description:"The transaction response.",content:{"application/json":{schema:{allOf:[{type:"object",properties:{status:{type:"string",enum:["OK","ERROR"]},error:{description:"Error details describing why PAM rejected the request",type:"object",required:["code","message"],properties:{code:{type:"string",description:"- `PAM_ERR_UNDEFINED` - When you need a generic error.\n- `PAM_ERR_ACC_NOT_FOUND` - When account of `playerId` is not found.\n- `PAM_ERR_GAME_NOT_FOUND` - When specified `providerGameId` is not found.\n- `PAM_ERR_ROUND_NOT_FOUND` - In getGameRound, when there is no game round with id `providerGameRoundId`.\n- `PAM_ERR_TRANS_NOT_FOUND` - In DEPOSIT transaction if the game round with id `providerRoundId` is not found.\n- `PAM_ERR_CASH_OVERDRAFT` - When user does not have enough funds on their account for a withdraw transactions.\n- `PAM_ERR_BONUS_OVERDRAFT` - When user does not have enough funds on their bonus account for a withdraw transaction.\n- `PAM_ERR_SESSION_NOT_FOUND` - When no session is found for provided `X-Player-Token`.\n- `PAM_ERR_SESSION_EXPIRED` - When session related to `X-Player-Token` has expired.\n- `PAM_ERR_MISSING_PROVIDER` - When specified query parameter `provider` is not found.\n- `PAM_ERR_TRANS_CURRENCY` - When specified `Currency` does not match that of the session.\n- `PAM_ERR_NEGATIVE_STAKE` - When transaction amount is negative.\n- `PAM_ERR_CANCEL_NOT_FOUND` - When the transaction trying to cancel doesn't exist.\n- `PAM_ERR_TRANS_ALREADY_CANCELLED` - When trying to cancel an already cancelled transaction, or when a Deposit is made toward a cancelled withdraw.\n- `PAM_ERR_CANCEL_NON_WITHDRAW` - When trying to cancel a transaction that is not a Withdraw transaction.\n- `PAM_ERR_BET_NOT_ALLOWED` - When a bet cannot be done, eg when the user is blocked.\n- `PAM_ERR_PLAYER_NOT_FOUND` - When `playerId` is not found.\n- `PAM_ERR_API_TOKEN` - When `Authorization` header api token does not match the PAM api token.\n- `PAM_ERR_TRANS_ALREADY_SETTLED` - When trying to cancel an already Deposited bet or when trying to Deposit on an already finished gameRound, finished bet.\n- `PAM_ERR_DUPLICATE_TRANS` - When a Deposit is made with an already existing `providerTransactionId` but with different `playerId`/`providerGameId`/`providerRoundId`.\n- `PAM_ERR_PROMO_OVERDRAFT` - When user does not have enough funds on their promo account for a withdraw transaction.\n- `PAM_ERR_TIMEOUT` - A timeout occurred\n",enum:["PAM_ERR_UNDEFINED","PAM_ERR_ACC_NOT_FOUND","PAM_ERR_GAME_NOT_FOUND","PAM_ERR_ROUND_NOT_FOUND","PAM_ERR_TRANS_NOT_FOUND","PAM_ERR_CASH_OVERDRAFT","PAM_ERR_BONUS_OVERDRAFT","PAM_ERR_SESSION_NOT_FOUND","PAM_ERR_SESSION_EXPIRED","PAM_ERR_MISSING_PROVIDER","PAM_ERR_TRANS_CURRENCY","PAM_ERR_NEGATIVE_STAKE","PAM_ERR_CANCEL_NOT_FOUND","PAM_ERR_TRANS_ALREADY_CANCELLED","PAM_ERR_CANCEL_NON_WITHDRAW","PAM_ERR_BET_NOT_ALLOWED","PAM_ERR_PLAYER_NOT_FOUND","PAM_ERR_API_TOKEN","PAM_ERR_TRANS_ALREADY_SETTLED","PAM_ERR_DUPLICATE_TRANS","PAM_ERR_PROMO_OVERDRAFT","PAM_ERR_TIMEOUT"]},message:{type:"string"}}}},required:["status"]},{type:"object",properties:{transactionResult:{type:"object",properties:{transactionId:{type:"string",description:"Unique transaction identifier from the PAM system",minLength:1,maxLength:40,example:"05a9edc0f73c297b"},balance:{description:"player account balance",type:"object",properties:{cashAmount:{description:"Funds on the account.",type:"number",format:"double",example:1236.123456,"x-go-type":"Amt"},bonusAmount:{description:"Funds on the bonus account.",type:"number",format:"double",example:1236.123456,"x-go-type":"Amt"},promoAmount:{type:"number",description:"Amount in some currency, rounded to 6 decimal places",format:"double",example:1236.123456,"x-go-type":"Amt"}},required:["cashAmount","bonusAmount","promoAmount"]}}}}}]}}}},400:{description:"Invalid request body"},401:{description:"Invalid session or api key",content:{"application/json":{schema:{type:"object",required:["status","error"],properties:{status:{description:"Status is Error",type:"string",example:"Error"},error:{description:"Error details describing why PAM rejected the request",type:"object",required:["code","message"],properties:{message:{type:"string"},code:{description:'Pam Error code "PAM_ERR_SESSION_NOT_FOUND" or "PAM_ERR_UNDEFINED"',type:"string",example:"PAM_ERR_SESSION_NOT_FOUND"}}}}}}}}},method:"post",path:"/players/{playerId}/transactions",servers:[{url:"http://pam-url",description:"operator pam server"}],security:[{bearerAuth:[]}],securitySchemes:{bearerAuth:{type:"http",description:"PAM API token, if any is required",scheme:"bearer"}},jsonRequestBodyExample:{currency:"USD",provider:"Evolution",transactionType:"DEPOSIT",cashAmount:1236.123456,bonusAmount:1236.123456,promoAmount:1236.123456,transactionDateTime:"1994-11-05T13:15:30Z",providerTransactionId:"42a9e3d4eddade52363a5c4fac852e80681c2fe5",providerBetRef:"f1adc846131b33be72df6a0c87e5e5da59dde0ff",providerGameId:"ecf559b11f0",providerRoundId:"47d4f7c212464aacf10",isGameOver:!0,promos:[{promoType:"PROMOBONUS",promoName:"Try this other game for free",promoStatus:"Active",promoReference:"C3",promoCode:"A1",promoAmount:1236.123456,promoAmountTotal:1236.123456,promoConfigRef:"B2",promoAwardRef:"C3",currency:"USD"}],jackpots:[{jackpotId:"Jackpot1",jackpotReference:"Jackpot1",jackpotAmount:1236.123456,jackpotBuckets:[{bucketType:"Jackpot1",bucketReference:"Jackpot1",bucketAmount:1236.123456,currency:"USD"}]}],tip:{tipAmount:1236.123456}},info:{title:"Valkyrie PAM API",description:'Specification describing required endpoints implemented in an operator\nPlayer Account Management(PAM) system, in order to integrate with\nthe Valkyrie aggregator.\n\nResponse format will consist of a common wrapper containing status\ncode and either requested data or error details according to specs\nbelow. In general HTTP error codes will only describe hard errors\nnot business logic.\n```json\n{\n  "status": "OK",\n  "entity": {...}\n}\n```\nor in case of error:\n```json\n{\n  "status": "ERROR",\n  "error": {\n    "code": 1\n    "msg": "provider not recognized"\n  }\n}\n```\n',version:"0.5.0"},postman:{name:"Create transaction for one player\n",description:{content:"Create a transaction for player with `playerId`  \nBehavior for transaction types:  \n  All addTransactions calls are expected to be idempotent, i.e. if a transaction already exists then balance should be returned together with status OK.  \n  - WITHDRAW, PROMOWITHDRAW  \n    A withdraw transaction starts the chain of events for a game round.  \n  - DEPOSIT  \n    If there is no corresponding game round, return error `PAM_ERR_TRANS_NOT_FOUND` and balance.  \n    If there is a transaction with the same id but different user, game or round return error `PAM_ERR_DUPLICATE_TRANS`  \n    If there is in fact a corresponding game round, but it's closed, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n  - PROMODEPOSIT  \n    A corresponding WITHDRAW does not need to exist for a PROMODEPOSIT to be accepted.  \n  - CANCEL, PROMOCANCEL  \n    If the corresponding WITHDRAW does not exist, return error `PAM_ERR_CANCEL_NOT_FOUND` and balance.  \n    If trying to cancel an already cancelled transaction, i.e. with a second unique cancellation request, return `PAM_ERR_TRANS_ALREADY_CANCELLED` and balance.  \n    If trying to cancel an already settled transaction, return error `PAM_ERR_TRANS_ALREADY_SETTLED` and balance.  \n    If trying to cancel something else, return error `PAM_ERR_CANCEL_NON_WITHDRAW` and balance.\n",type:"text/plain"},url:{path:["players",":playerId","transactions"],host:["{{baseUrl}}"],query:[{disabled:!1,description:{content:"(Required) Name of the game provider associated with the session",type:"text/plain"},key:"provider",value:""}],variable:[{disabled:!1,description:{content:"(Required) id of player",type:"text/plain"},type:"any",value:"",key:"playerId"}]},header:[{disabled:!1,description:{content:"(Required) Player game session identifier",type:"text/plain"},key:"X-Player-Token",value:""},{disabled:!1,description:{content:"(Required) Header for correlating requests between the services for debugging purposes and request tracing. The value will originate from the game providers that support request identification. Otherwise Valkyrie will generate a value.\n",type:"text/plain"},key:"X-Correlation-ID",value:""},{key:"Content-Type",value:"application/json"},{key:"Accept",value:"application/json"}],method:"POST",body:{mode:"raw",raw:'""',options:{raw:{language:"json"}}}}},sidebar_class_name:"post api-method",info_path:"docs/wallet/valkyrie-pam-api",custom_edit_url:null},sidebar:"defaultSidebar",previous:{title:"Introduction",permalink:"/docs/wallet/valkyrie-pam-api"},next:{title:"Get player account balance",permalink:"/docs/wallet/get-balance"}},h={},A=[{value:"Create transaction for one player",id:"create-transaction-for-one-player",level:2}],y={toc:A};function _(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},y,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"create-transaction-for-one-player"},"Create transaction for one player"),(0,n.kt)("p",null,"Create a transaction for player with ",(0,n.kt)("inlineCode",{parentName:"p"},"playerId"),(0,n.kt)("br",{parentName:"p"}),"\n","Behavior for transaction types:",(0,n.kt)("br",{parentName:"p"}),"\n","All addTransactions calls are expected to be idempotent, i.e. if a transaction already exists then balance should be returned together with status OK.  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"WITHDRAW, PROMOWITHDRAW",(0,n.kt)("br",{parentName:"li"}),"A withdraw transaction starts the chain of events for a game round.  "),(0,n.kt)("li",{parentName:"ul"},"DEPOSIT",(0,n.kt)("br",{parentName:"li"}),"If there is no corresponding game round, return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_TRANS_NOT_FOUND")," and balance.",(0,n.kt)("br",{parentName:"li"}),"If there is a transaction with the same id but different user, game or round return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_DUPLICATE_TRANS"),(0,n.kt)("br",{parentName:"li"}),"If there is in fact a corresponding game round, but it's closed, return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_TRANS_ALREADY_SETTLED")," and balance.  "),(0,n.kt)("li",{parentName:"ul"},"PROMODEPOSIT",(0,n.kt)("br",{parentName:"li"}),"A corresponding WITHDRAW does not need to exist for a PROMODEPOSIT to be accepted.  "),(0,n.kt)("li",{parentName:"ul"},"CANCEL, PROMOCANCEL",(0,n.kt)("br",{parentName:"li"}),"If the corresponding WITHDRAW does not exist, return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_CANCEL_NOT_FOUND")," and balance.",(0,n.kt)("br",{parentName:"li"}),"If trying to cancel an already cancelled transaction, i.e. with a second unique cancellation request, return ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_TRANS_ALREADY_CANCELLED")," and balance.",(0,n.kt)("br",{parentName:"li"}),"If trying to cancel an already settled transaction, return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_TRANS_ALREADY_SETTLED")," and balance.",(0,n.kt)("br",{parentName:"li"}),"If trying to cancel something else, return error ",(0,n.kt)("inlineCode",{parentName:"li"},"PAM_ERR_CANCEL_NON_WITHDRAW")," and balance.")),(0,n.kt)("details",{style:{marginBottom:"1rem"},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"Path Parameters")),(0,n.kt)("div",null,(0,n.kt)("ul",null,(0,n.kt)(s.Z,{className:"paramsItem",param:{in:"path",required:!0,name:"playerId",description:"id of player",example:"73619e57b3bc4b4e9014132be3bd12a9",schema:{type:"string"}},mdxType:"ParamsItem"})))),(0,n.kt)("details",{style:{marginBottom:"1rem"},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"Query Parameters")),(0,n.kt)("div",null,(0,n.kt)("ul",null,(0,n.kt)(s.Z,{className:"paramsItem",param:{in:"query",name:"provider",required:!0,description:"Name of the game provider associated with the session",example:"Evolution",schema:{type:"string"}},mdxType:"ParamsItem"})))),(0,n.kt)("details",{style:{marginBottom:"1rem"},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"Header Parameters")),(0,n.kt)("div",null,(0,n.kt)("ul",null,(0,n.kt)(s.Z,{className:"paramsItem",param:{name:"X-Player-Token",description:"Player game session identifier",in:"header",required:!0,schema:{name:"sessionToken",description:"Player game session identifier",type:"string",example:"7ca10daf12f2cac9fecf559b11f0f0c8bd21ae43",minLength:32,maxLength:40}},mdxType:"ParamsItem"}),(0,n.kt)(s.Z,{className:"paramsItem",param:{name:"X-Correlation-ID",description:"Header for correlating requests between the services for debugging purposes and request tracing. The value will originate from the game providers that support request identification. Otherwise Valkyrie will generate a value.\n",in:"header",required:!0,schema:{type:"string"}},mdxType:"ParamsItem"})))),(0,n.kt)(i.Z,{mdxType:"MimeTabs"},(0,n.kt)(m.Z,{label:"application/json",value:"application/json-schema",mdxType:"TabItem"},(0,n.kt)("details",{style:{},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{textAlign:"left"}},(0,n.kt)("strong",null,"Request Body"),(0,n.kt)("strong",{style:{fontSize:"var(--ifm-code-font-size)",color:"var(--openapi-required)"}}," required")),(0,n.kt)("div",{style:{textAlign:"left",marginLeft:"1rem"}}),(0,n.kt)("ul",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"currency",required:!0,deprecated:void 0,schemaDescription:"ISO 4217 three letter currency code",schemaName:"string",qualifierMessage:"**Possible values:** Value must match regular expression `^[A-Z]{3}$`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"provider",required:!0,deprecated:void 0,schemaDescription:"Game provider identity known by the PAM and Valkyrie",schemaName:"string",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"transactionType",required:!0,deprecated:void 0,schemaDescription:"Transaction types according to:\n* `DEPOSIT` - for adding funds\n* `WITHDRAW` - subtract funds from an account balance. Generally for placing bets\n* `CANCEL` - reverting a previous transaction\n* `PROMODEPOSIT` - payout from promo and similar offerings programs\n* `PROMOWITHDRAW` - buyin to promo and similar offerings programs\n* `PROMOCANCEL` - reverting a previous promo transaction\n",schemaName:"string",qualifierMessage:"**Possible values:** [`DEPOSIT`, `WITHDRAW`, `CANCEL`, `PROMODEPOSIT`, `PROMOWITHDRAW`, `PROMOCANCEL`]",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"cashAmount",required:!0,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"bonusAmount",required:!0,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoAmount",required:!0,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"transactionDateTime",required:!0,deprecated:void 0,schemaDescription:"A date and time in IS0 8601 format",schemaName:"date-time",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"providerTransactionId",required:!0,deprecated:void 0,schemaDescription:"The RGS transaction identifier. Unique for each provider. Either this or `providerBetRef` is required. `providerBetRef` will be prioritized if both are present.",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"providerBetRef",required:!1,deprecated:void 0,schemaDescription:"Provider bet reference for grouping or matching transactions. Either this or `providerTransactionId` is required. This one is prioritized if both are present. It is used for RGS:s that encapsulate many transactions in a wrapper transaction.",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"providerGameId",required:!1,deprecated:void 0,schemaDescription:"The game identifier unique for the RGS(provider)",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"providerRoundId",required:!1,deprecated:void 0,schemaDescription:"The unique game round identifier for the provider",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"isGameOver",required:!1,deprecated:void 0,schemaDescription:void 0,schemaName:"boolean",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"promos"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object[]")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"promoType",required:!1,deprecated:void 0,schemaDescription:"Promo types according to:\n* `PROMOBONUS` - bonus promotion\n* `PROMOTOURNAMENT` - tournament related promotion\n* `PROMOFROMGAME` - promotion awarded from a game\n* `PROMOCAP` - capped promotion\n* `PROMOLIMIT` - limited promotion\n* `PROMOMONEYREWARD` - real money promotion award\n* `FREEROUNDS` - extra game rounds for free\n* `FREESPINS` - extra spins for free\n",schemaName:"string",qualifierMessage:"**Possible values:** [`PROMOBONUS`, `PROMOTOURNAMENT`, `PROMOFROMGAME`, `PROMOCAP`, `PROMOLIMIT`, `PROMOMONEYREWARD`, `FREEROUNDS`, `FREESPINS`]",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoName",required:!1,deprecated:void 0,schemaDescription:"Name of offering, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoStatus",required:!1,deprecated:void 0,schemaDescription:"Offering status, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoReference",required:!1,deprecated:void 0,schemaDescription:"Reference to the offering, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoCode",required:!1,deprecated:void 0,schemaDescription:"Offering code, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoAmount",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoAmountTotal",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoConfigRef",required:!1,deprecated:void 0,schemaDescription:"Offering configuration reference, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoAwardRef",required:!1,deprecated:void 0,schemaDescription:"Offering award reference, if any",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"currency",required:!1,deprecated:void 0,schemaDescription:"ISO 4217 three letter currency code",schemaName:"string",qualifierMessage:"**Possible values:** Value must match regular expression `^[A-Z]{3}$`",defaultValue:void 0,mdxType:"SchemaItem"})))),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"jackpots"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object[]")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"jackpotId",required:!1,deprecated:void 0,schemaDescription:"Jackpot identifier",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"jackpotReference",required:!1,deprecated:void 0,schemaDescription:"Jackpot reference, arbitrary use",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"jackpotAmount",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"jackpotBuckets"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object[]")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"bucketType",required:!1,deprecated:void 0,schemaDescription:"Type of jackpot bucket, if any. Arbitrary use",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"bucketReference",required:!1,deprecated:void 0,schemaDescription:"Jackpot bucket reference, arbitrary use",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"bucketAmount",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"currency",required:!1,deprecated:void 0,schemaDescription:"ISO 4217 three letter currency code",schemaName:"string",qualifierMessage:"**Possible values:** Value must match regular expression `^[A-Z]{3}$`",defaultValue:void 0,mdxType:"SchemaItem"}))))))),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"tip"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"tipAmount",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"})))))))),(0,n.kt)("div",null,(0,n.kt)(o.Z,{mdxType:"ApiTabs"},(0,n.kt)(m.Z,{label:"200",value:"200",mdxType:"TabItem"},(0,n.kt)("div",null,(0,n.kt)("p",null,"The transaction response.")),(0,n.kt)("div",null,(0,n.kt)(i.Z,{schemaType:"response",mdxType:"MimeTabs"},(0,n.kt)(m.Z,{label:"application/json",value:"application/json",mdxType:"TabItem"},(0,n.kt)(p.Z,{mdxType:"SchemaTabs"},(0,n.kt)(m.Z,{label:"Schema",value:"Schema",mdxType:"TabItem"},(0,n.kt)("details",{style:{},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{textAlign:"left"}},(0,n.kt)("strong",null,"Schema")),(0,n.kt)("div",{style:{textAlign:"left",marginLeft:"1rem"}}),(0,n.kt)("ul",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"status",required:!1,deprecated:void 0,schemaDescription:void 0,schemaName:"string",qualifierMessage:"**Possible values:** [`OK`, `ERROR`]",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"error"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)("div",{style:{marginTop:".5rem",marginBottom:".5rem"}},(0,n.kt)("p",null,"Error details describing why PAM rejected the request")),(0,n.kt)(c.Z,{collapsible:!1,name:"code",required:!1,deprecated:void 0,schemaDescription:"- `PAM_ERR_UNDEFINED` - When you need a generic error.\n- `PAM_ERR_ACC_NOT_FOUND` - When account of `playerId` is not found.\n- `PAM_ERR_GAME_NOT_FOUND` - When specified `providerGameId` is not found.\n- `PAM_ERR_ROUND_NOT_FOUND` - In getGameRound, when there is no game round with id `providerGameRoundId`.\n- `PAM_ERR_TRANS_NOT_FOUND` - In DEPOSIT transaction if the game round with id `providerRoundId` is not found.\n- `PAM_ERR_CASH_OVERDRAFT` - When user does not have enough funds on their account for a withdraw transactions.\n- `PAM_ERR_BONUS_OVERDRAFT` - When user does not have enough funds on their bonus account for a withdraw transaction.\n- `PAM_ERR_SESSION_NOT_FOUND` - When no session is found for provided `X-Player-Token`.\n- `PAM_ERR_SESSION_EXPIRED` - When session related to `X-Player-Token` has expired.\n- `PAM_ERR_MISSING_PROVIDER` - When specified query parameter `provider` is not found.\n- `PAM_ERR_TRANS_CURRENCY` - When specified `Currency` does not match that of the session.\n- `PAM_ERR_NEGATIVE_STAKE` - When transaction amount is negative.\n- `PAM_ERR_CANCEL_NOT_FOUND` - When the transaction trying to cancel doesn't exist.\n- `PAM_ERR_TRANS_ALREADY_CANCELLED` - When trying to cancel an already cancelled transaction, or when a Deposit is made toward a cancelled withdraw.\n- `PAM_ERR_CANCEL_NON_WITHDRAW` - When trying to cancel a transaction that is not a Withdraw transaction.\n- `PAM_ERR_BET_NOT_ALLOWED` - When a bet cannot be done, eg when the user is blocked.\n- `PAM_ERR_PLAYER_NOT_FOUND` - When `playerId` is not found.\n- `PAM_ERR_API_TOKEN` - When `Authorization` header api token does not match the PAM api token.\n- `PAM_ERR_TRANS_ALREADY_SETTLED` - When trying to cancel an already Deposited bet or when trying to Deposit on an already finished gameRound, finished bet.\n- `PAM_ERR_DUPLICATE_TRANS` - When a Deposit is made with an already existing `providerTransactionId` but with different `playerId`/`providerGameId`/`providerRoundId`.\n- `PAM_ERR_PROMO_OVERDRAFT` - When user does not have enough funds on their promo account for a withdraw transaction.\n- `PAM_ERR_TIMEOUT` - A timeout occurred\n",schemaName:"string",qualifierMessage:"**Possible values:** [`PAM_ERR_UNDEFINED`, `PAM_ERR_ACC_NOT_FOUND`, `PAM_ERR_GAME_NOT_FOUND`, `PAM_ERR_ROUND_NOT_FOUND`, `PAM_ERR_TRANS_NOT_FOUND`, `PAM_ERR_CASH_OVERDRAFT`, `PAM_ERR_BONUS_OVERDRAFT`, `PAM_ERR_SESSION_NOT_FOUND`, `PAM_ERR_SESSION_EXPIRED`, `PAM_ERR_MISSING_PROVIDER`, `PAM_ERR_TRANS_CURRENCY`, `PAM_ERR_NEGATIVE_STAKE`, `PAM_ERR_CANCEL_NOT_FOUND`, `PAM_ERR_TRANS_ALREADY_CANCELLED`, `PAM_ERR_CANCEL_NON_WITHDRAW`, `PAM_ERR_BET_NOT_ALLOWED`, `PAM_ERR_PLAYER_NOT_FOUND`, `PAM_ERR_API_TOKEN`, `PAM_ERR_TRANS_ALREADY_SETTLED`, `PAM_ERR_DUPLICATE_TRANS`, `PAM_ERR_PROMO_OVERDRAFT`, `PAM_ERR_TIMEOUT`]",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"message",required:!1,deprecated:void 0,schemaDescription:void 0,schemaName:"string",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"})))),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"transactionResult"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"transactionId",required:!1,deprecated:void 0,schemaDescription:"Unique transaction identifier from the PAM system",schemaName:"string",qualifierMessage:"**Possible values:** `non-empty` and `<= 40 characters`",defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"balance"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)("div",{style:{marginTop:".5rem",marginBottom:".5rem"}},(0,n.kt)("p",null,"player account balance")),(0,n.kt)(c.Z,{collapsible:!1,name:"cashAmount",required:!1,deprecated:void 0,schemaDescription:"Funds on the account.",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"bonusAmount",required:!1,deprecated:void 0,schemaDescription:"Funds on the bonus account.",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"promoAmount",required:!1,deprecated:void 0,schemaDescription:"Amount in some currency, rounded to 6 decimal places",schemaName:"double",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"})))))))))),(0,n.kt)(m.Z,{label:"Example (from schema)",value:"Example (from schema)",mdxType:"TabItem"},(0,n.kt)(d.Z,{responseExample:'{\n  "status": "OK",\n  "error": {\n    "code": "PAM_ERR_UNDEFINED",\n    "message": "string"\n  },\n  "transactionResult": {\n    "transactionId": "05a9edc0f73c297b",\n    "balance": {\n      "cashAmount": 1236.123456,\n      "bonusAmount": 1236.123456,\n      "promoAmount": 1236.123456\n    }\n  }\n}',language:"json",mdxType:"ResponseSamples"}))))))),(0,n.kt)(m.Z,{label:"400",value:"400",mdxType:"TabItem"},(0,n.kt)("div",null,(0,n.kt)("p",null,"Invalid request body")),(0,n.kt)("div",null)),(0,n.kt)(m.Z,{label:"401",value:"401",mdxType:"TabItem"},(0,n.kt)("div",null,(0,n.kt)("p",null,"Invalid session or api key")),(0,n.kt)("div",null,(0,n.kt)(i.Z,{schemaType:"response",mdxType:"MimeTabs"},(0,n.kt)(m.Z,{label:"application/json",value:"application/json",mdxType:"TabItem"},(0,n.kt)(p.Z,{mdxType:"SchemaTabs"},(0,n.kt)(m.Z,{label:"Schema",value:"Schema",mdxType:"TabItem"},(0,n.kt)("details",{style:{},"data-collapsed":!1,open:!0},(0,n.kt)("summary",{style:{textAlign:"left"}},(0,n.kt)("strong",null,"Schema")),(0,n.kt)("div",{style:{textAlign:"left",marginLeft:"1rem"}}),(0,n.kt)("ul",{style:{marginLeft:"1rem"}},(0,n.kt)(c.Z,{collapsible:!1,name:"status",required:!1,deprecated:void 0,schemaDescription:"Status is Error",schemaName:"string",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!0,className:"schemaItem",mdxType:"SchemaItem"},(0,n.kt)("details",{style:{}},(0,n.kt)("summary",{style:{}},(0,n.kt)("strong",null,"error"),(0,n.kt)("span",{style:{opacity:"0.6"}}," object")),(0,n.kt)("div",{style:{marginLeft:"1rem"}},(0,n.kt)("div",{style:{marginTop:".5rem",marginBottom:".5rem"}},(0,n.kt)("p",null,"Error details describing why PAM rejected the request")),(0,n.kt)(c.Z,{collapsible:!1,name:"message",required:!1,deprecated:void 0,schemaDescription:void 0,schemaName:"string",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}),(0,n.kt)(c.Z,{collapsible:!1,name:"code",required:!1,deprecated:void 0,schemaDescription:'Pam Error code "PAM_ERR_SESSION_NOT_FOUND" or "PAM_ERR_UNDEFINED"',schemaName:"string",qualifierMessage:void 0,defaultValue:void 0,mdxType:"SchemaItem"}))))))),(0,n.kt)(m.Z,{label:"Example (from schema)",value:"Example (from schema)",mdxType:"TabItem"},(0,n.kt)(d.Z,{responseExample:'{\n  "status": "Error",\n  "error": {\n    "message": "string",\n    "code": "PAM_ERR_SESSION_NOT_FOUND"\n  }\n}',language:"json",mdxType:"ResponseSamples"}))))))))))}_.isMDXComponent=!0}}]);